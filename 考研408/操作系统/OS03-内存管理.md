
## 框架

- 内存管理基础
	- 基本原理和要求
	- 连续分配管理方式：单一连续分配、固定分区分配、动态分区分配
	- 基本分页存储管理
	- 基本分段存储管理
	- 段页式管理
- 虚拟内存管理
	- 基本概念
	- 请求分页管理方式
	- 页框分配
	- 页面置换算法
	- 抖动和工作集
	- 内存映射文件
	- 虚拟存储器性能影响因素
	- 地址翻译

## 四种动态分区分配算法

- 首次适应：链首开始找，找第一个可容纳分区。最简单、最好、最快，但低地址碎片太多。
- 临近适应：上次查找位置开始找，找第一个可容纳分区。总体碎片比首次适应多。
- 最佳适应：按**容量递增次序**排列分区，取最小的可容纳分区。外部碎片最多，性能差。
- 最坏适应：按**容量递减次序**排列分区，取最大的可容纳分区。缺少大块内存，性能也差。

## 三种存储管理方式

**分页存储的基本概念**：
- 页面和页面大小
- 地址结构：页号+页内偏移量
- 页表：进程内置的、逻辑页面到物理页框的映射表

**快表（TLB）**：一组最近访问的页面映射关系。

**两级页表**：逻辑地址=一级页号+二级页号+页内偏移

## 页框分配策略

**内存分配策略**：
- 固定分配局部置换
- 可变分配全局置换
- 可变分配局部置换

**物理块调入算法**：按比例分配算法、优先权分配算法。

**从何处调换页面**：
- 对换区空间足够：全部从对换区调入。
- 对换区空间不够：只读文件会从文件区调入。
- UNIX方式：区分文件区和对换区。

## 四种页面置换算法

### 最佳置换算法（OPT）

一种无法实现的理想化算法，总是淘汰最长时间内不再被访问的页面。

### FIFO

优先淘汰最早进入内存的页面。

基于队列实现。

**Belady异常**：只会在FIFO算法中出现的一种异常，成因：设页面数量为4，则如果刻意构造周期为5的循环访问页面序列，则会导致缺页异常反复出现，而其他调度算法没有这种现象。

### LRU

优先淘汰最长时间未访问过的页面。

基于堆栈实现，需要相关的硬件支持。

### CLOCK

**简单CLOCK**：设访问位，根据访问位的取值决定行为：
- 被调入时：设访问位为1。
- 被扫描但不匹配：
	- 访问位为1：设访问位为0。
	- 访问位为0：调出。

**改进CLOCK**：增加修改位。
- 换出优先级：`(A=0,M=0)>(A=0,M=1)>(A=1,M=0)>(A=1,M=1)`。

### 对比



## 真题选择错题

![[Pasted image 20230909233051.png]]

46：
答案是B。
注意最佳适配要从上一次查完的位置开始找。
![[Pasted image 20230909234125.png]]

47：
易错选A，答案是B。
原因在于，每个页面可以存储512个页表项，一个页面的大小是1024B。说明整个系统的二级页表有：
$$
(2^{26}/2^{10})/2^9=2^7=128
$$
张。因此需要128个一级页表项。

![[Pasted image 20230909233117.png]]

52：
注意各个分区并非按照始址顺序排列的。因此回收`[60,200)`分区后，它会连接`[20,60)`和`[200,400)`两个分区，最终分区数量是3个，表内首个分区是合并后分区链内的最小者`[500,580)`。答案选B。

![[Pasted image 20230909234045.png]]

56：
一级页表即页目录。

## 真题大题

### 2013：页式存储

![[Pasted image 20230909235916.png]]

当时做对了。

### 