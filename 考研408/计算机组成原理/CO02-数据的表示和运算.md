
## 框架

- 数制与编码
	- 进位计数制及其相互转换
	- BCD码（略）
	- 定点数的编码表示：原码、反码、补码、移码
	- 整数的表示
- 运算方法和运算电路
	- 基本运算部件
	- 定点数的移位运算
	- 定点数的加减运算
	- 定点数的乘除运算
	- C语言中的整数类型及类型转换
	- 数据的存储和排列
- 浮点数的表示与运算
	- 浮点数的表示
	- 浮点数的加减运算

## 定点数的编码表示

**定点表示**：
- 定点小数：`A.XXXX`，A为符号位。
- 定点整数：`AXXXX`，A为符号位。

| 表示法 | `x1=+0.1101` | `x2=-0.1101` | 0的表示 | 优点 | 缺点 |
| --- | --- | --- | --- | --- | --- |
| 原码 | `0.1101` | `1.1101` | 不唯一 | 与真值的对应关系直观 | 0的表示不唯一，计算复杂 |
| 补码 | `0.1101` | `1.0011` | `0.0000` | 计算简便 | 无 |
| 反码 | `0.1101` | `1.0010` | 不唯一 | 无 | 0的表示不唯一，表示范围少一个负数 |
| 移码 | `1.1101` | `0.0011` | `1.0000` | 无 | 欠直观 |

## 加法运算部件

**一位全加器**：
- 输入：加数$A_i,B_i$和前一位进位$C_{i-1}$。
- 输出：本位和$S_i$和进位$C_i$。

$$
S_i=A_i\oplus B_i\oplus C_{i-1}, C_i=A_i B_i+(A_i\oplus B_i)C_{i-1}
$$

![[Pasted image 20230922211834.png]]

**串行进位加法器**：多个一位全加器串联。

**并行进位加法器**：
令进位产生函数$G_i=A_i B_i$，进位传递函数$P_i=A_i\oplus B_i$，则全加器的进位表达式为：
$$
C_i=G_i+P_i C_{i-1}
$$
对于4位全加器，有：
$$
C_4=G_4+P_4C_3=G_4+P_4G_3+P_4P_3G_2+P_4P_3P_2G_1+P_4P_3P_2P_1C_0
$$

逻辑线路表示：
![[Pasted image 20230922212733.png]]

## 定点数的乘法运算

### 原码一位乘法

设被乘数为$x_S. x_1x_2\cdots x_n$，乘数为$y_S.y_1y_2\cdots y_n$，运算规则：
- 符号位不参加运算，乘积符号位为$x_S\oplus y_S$，乘数取绝对值参加运算，以原码形式表示。
- **生成部分积**：部分积是乘法过程的中间结果。乘数的每一位$y_i$乘以被乘数得$X\cdot y_i$后，将该结果和之前的结果累加，得到部分积，初值为0。
- **部分积右移**：从乘数的最低位$y_n$开始判断：若$y_n=1$，则部分积加上被乘数$|x|$，然后右移一位；若$y_n=0$，则部分积加上0，然后右移一位。
- 重复步骤，判断$n$次。

![[Pasted image 20230922230510.png]]

### 补码一位乘法（Booth算法）

设$[X]_{补}=x_s.x_1x_2\cdot x_n$，$[Y]_{补}=y_s.y_1y_2\cdots y_n$，运算规则：
- 符号位参加运算，运算结果均通过补码表示。
- 被乘数和部分积取双符号位，初值为0，乘数取单符号位。
- 乘数末位增设附加位$y_{n+1}$，初值为0。
- **根据尾数加或减**：根据$(y_n,y_{n+1})$的当前取值情况，分别采取不同操作：
	- $(0,0)$、$(1,1)$：不进行操作。
	- $(0,1)$：部分积加$[X]_{补}$。
	- $(1,0)$：部分积加$[-X]_{补}$。
- 如果当前是第$n+1$次操作，则结束运算；否则部分积**整体右移一位**。这意味着整个运算包括$n+1$次操作和$n$次移位。
- 细节：
	- 部分积包括左侧的高位部分积和右侧的低位部分积，高位部分积的初始值为$x_sx_s.x_1x_2\cdots x_n$，低位部分积的初始值为$y_s.y_1y_2\cdots y_ny_{n+1}$。
	- 运算在左侧的高位部分积上进行。
	- 移位操作会将左侧高位部分积的最右一位移出，移到右侧低位部分积的最左侧，右侧部分积的小数点不动。最左侧补位采用符号补位。
	- 运算结束时，$y_n$和$y_{n+1}$应恰在小数点两侧。运算结果取左侧部分积全部和右侧部分积的高$n$位。

![[Pasted image 20230922232613.png]]

最终结果：$[x\cdot y]_{补}=-0.01110001$。

## 定点数的除法运算

### 原码除法运算（不恢复余数法）

设被除数$[X]_{原}=x_s.x_1x_2\cdots x_n$，除数$[Y]_{原}=y_s.y_1y_2\cdots y_n$。

运算规则：
- 商的符号$Q_s=x_s\oplus y_s$，符号位不参与计算。
- 先用被除数减去除数

### 补码除法运算（加减交替法）

