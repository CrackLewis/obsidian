
## 主要内容

- 数据链路层的功能
- 组帧
- 差错控制
	- 检错编码，纠错编码
- 流量控制与可靠传输机制
	- 流量控制、可靠传输、滑动窗口机制、停止-等待协议
	- 后退N帧协议（GBN）、选择重传协议（SR）
- 介质访问控制
	- 信道划分：频分多路复用、时分多路复用、波分多路复用、码分多路复用
	- 随机访问：ALOHA协议、CSMA协议、CSMA/CD协议、CSMA/CA协议
	- 令牌传递协议
- 局域网
	- 局域网基本概念和体系结构；以太网和IEEE 802.3
	- IEEE 802.11无线局域网；VLAN基本概念与基本原理
- 广域网
	- 广域网的基本概念
	- PPP协议
- 数据链路层设备
	- 局域网交换机及其工作原理

## 数据链路层的功能

角色：在物理层提供的服务的基础上，向网络层提供服务。

主要作用：
- 加强物理层传输比特流的功能
- 将物理层提供的可能出错的物理连接改造成逻辑上无差错的数据链路，使之对网络层表现为一条无差错的链路

功能：
- 为网络层提供服务：
	- 无确认的无连接服务：无链路连接，无确认，适用于以太网等实时连接和低误码率的网络。
	- 有确认的无连接服务：无链路连接，有确认，适用于无线通信等高误码率网络。
	- 有确认的面向连接服务：有链路连接（建立链路-传输帧-释放链路），适用于通信要求较高的场合。
- 链路管理：在面向连接的网络中，管理连接的建立、维持和释放过程。
- 帧定界、帧同步与透明传输：
	- 帧：数据链路层的传输单元，由比特流的前后添加头部和尾部构成
	- 帧定界：由帧首部和尾部中的控制信息划定帧的边界
	- 帧同步：接收方从二进制比特流中划分出帧的起始和终止点
	- 透明传输：通过有效措施，使链路上可以传输任意的比特组合
- 流量控制：
	- 背景：如果发送方发送过快，会造成帧的丢失
	- 目的：限制发送方的数据流量，使其发送速率不超过接收方的接收能力
	- 控制对象：*相邻两个结点之间的*数据链路流量
	- 反馈机制：使发送方得知接收方能否跟得上自己，什么时候可以发下一帧，什么时候必须暂停
- 差错控制：
	- 背景：由于信道噪声等原因，帧在传输过程中可能出错
	- 目的：使发送方确定接收方是否正确收到数据
	- 错误类型：
		- 位错：帧中某些位出现差错，用循环冗余校验（CRC）发现，通过自动重传请求（ARQ）方式重传出错的帧。
			- ARQ方法：每个帧传输时附带CRC码，接收方检验CRC出错则该帧被丢弃，发送方超时重传。
		- 帧错：帧的丢失、重复或失序。引入定时器和编号机制保证非重复性和顺序。

## 组帧

目的：在出错时，只重传出错的帧，而非整个比特流，提升效率。

### 字符计数法

原理：在帧的头部用一个计数字段标明帧内字符数。通过该计数字段推算帧的结束位置。

![[Pasted image 20230623085947.png]]

缺陷：如果计数字段出错，则失去帧边界划分的依据，收发双方失去同步，造成灾难性后果。

### 字符填充的首尾定界符法

原理：
- 用特定字符定界一帧的开始（SOH）和结束（EOT）。
- 为了使信息位中出现的特殊字符不被误判为首尾定界符，在这些字符前加转义字符（ESC）加以区分。

![[Pasted image 20230623090227.png]]

### 零比特填充的首尾标志法

原理：
- 使用一个特殊的比特模式“01111110”表示一帧的开始和结束
- 发送方将信息位中的每5个连续1的后面追加一个0
- 接收方识别01111110序列作为开始和结束控制序列，自动拿掉每5个连续1后面的0

特点：性能优于字符填充法，易于用硬件实现。

![[Pasted image 20230623095531.png]]

### 违规编码法

原理：利用物理层编码阶段中的违规编码（如曼彻斯特编码的1-1编码，与表示1的1-0编码和表示0的0-1编码相对）实现控制功能。

特点：
- 不需要任何填充技术
- 但也只适用于采用冗余编码的特殊编码环境

## 差错控制

背景：实际通信链路都是不理想的，任何比特在传输过程中均可能出错。

比特差错：外界或链路因素导致比特与预期值反转，1变成0，0变成1。

分类：
- 自动重传请求（ARQ）：检错
- 前向纠错（FEC）：纠错

### 检错编码

核心思想：
- 在有效数据发送前，根据某种关系附加一定的冗余位，构成一个符合某一规则的码字再发送。
- 一旦出现比特差错，它将破坏先前计算冗余位时使用的规则，便于接收端发现并通知重传。

#### 奇偶校验码

组成：
- 信息元：$n-1$位，包含信息。
- 校验元：一位，使整个校验码中1的个数为奇数（奇校验码）或偶数（偶校验码）。

原理：接收方对奇偶校验码计算异或和，检查是否为1（奇校验码）或0（偶校验码）。

特点：
- 只能检测奇数位的出错情况
- 无法定位出错位

#### 循环冗余码（CRC，多项式码）

**本知识点是重点。**

背景：任何一个$k$位二进制都可与一个以$0,1$为系数的$k-1$次多项式一一对应。

原理：
- 收发双方约定一个$0,1$系数的多项式$G(x)$。
- 发送方对每个$m$比特的帧或报文，根据$G(x)$生成一个$r$比特的帧检验序列（FCS），整个帧的最终长度是$m+r$比特。
- 接收方根据$G(x)$对整个帧进行检验。

步骤：设待发送的帧为$M(x)$，约定的多项式$G(x)$。
- 加0：若$G(x)=O(x^{r-1})$，则令$M'(x)=x^{r-1}M(x)$。
- 模2除：令$M'(x)$为被除数，$G(x)$为除数，利用模2除法计算出余数多项式$R(x)$，该多项式对应的$r$位二进制序列作为FCS。

举例：$M(x)=101001$，$G(x)=1101$。
- $G(x)$为3阶，$R_6(x)=M'(x)=101001000$作为被除数。
- 首位为1：$R_5(x)=R_6(x)\oplus x^6G(x)=11101000$。
- 首位为1：$R_4(x)=R_5(x)\oplus x^5G(x)=0111000$。
- 首位为0：$R_3(x)=R_4(x)=111000$。
- 首位为1：$R_2(x)=R_3(x)\oplus x^3G(x)=01100$。
- 首位为0：$R_1(x)=R_2(x)=1100$。
- 首位为1：$R_0(x)=R_1(x)\oplus xG(x)=001$，作为余数。
- 将余数$001$追加到$M(x)$后：$P(x)=r^3M(x)+R_0(x)=101001001$即为待发送序列。

![[Pasted image 20230623104317.png]]

### 纠错编码（海明码）

**本知识点是重点。计组部分的海明码删除，但这里仍然要考。**

纠错原理：冗余信息足够，使接收方能够推算出信息元中的哪一位出了错。

**注意：纠错编码并不特指海明码，而是以海明码为代表。**

海明码原理：
- 在有效信息位中加入几个校验位形成海明码，把每个二进制位分配到几个奇偶校验组。
- 当某一位出错后，就会引起数个校验位数值的变化，这些位的变化可以指出错位的具体位置。

