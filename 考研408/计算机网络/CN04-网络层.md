
## 主要内容

- 网络层的功能
	- 异构网络互连
	- 路由和转发
	- SDN基本概念
	- 拥塞控制
- 路由算法
	- 静态路由与动态路由
	- 距离-向量路由算法
	- 链路状态路由算法
	- 层次路由
- IPv4
	- IPv4分组
	- IPv4地址与NAT
	- 子网划分与子网掩码
	- CIDR
	- 路由聚合
	- ARP
	- DHCP与ICMP
- IPv6
	- IPv6的主要特点
	- IPv6地址
- 路由协议
	- 自治系统
	- 域内路由与域间路由
	- RIP路由协议
	- OSPF路由协议
	- BGP路由协议
- IP组播
	- 组播的概念
	- IP组播地址
- 移动IP
	- 移动IP的概念
	- 移动IP的通信过程
- 网络层设备
	- 路由器的组成和功能
	- 路由表与路由转发

## 网络层的功能

网络层的设计思路：向上提供简单灵活、无连接、尽最大努力交付的数据报服务。

设计思路的好处：降低网络造价，运行方式灵活，能够适应多种应用。

### 异构网络互连

网络互连：将两个以上的计算机网络，通过一定方法，用一些中间设备（**中继系统**）连接起来，以构成更大的网络系统。

中继系统分类：
- 网络扩大系统：
	- 物理层中继系统：转发器，集线器。
	- 数据链路层中继系统：网桥或交换机。
- 网络互连系统：
	- 网络层中继系统：路由器。
	- 网络层以上的中继系统：网关。

**虚拟互连网络**（逻辑互连网络）：互连起来的各种物理网路的异构性客观存在，但通过网络层协议可以使这些性能各异的网络看起来是一个统一的网络。
- **IP网络**：在网络层使用IP协议的虚拟互连网络。
- 好处：屏蔽了各网络的异构细节，简化通信流程。

### 路由与转发

路由器的两个主要功能：
- 路由选择：按照复杂的分布式算法，根据从各相邻路由器得到的关于整个网络拓扑的变化情况，动态地改变所选择的路由。
- 分组转发：根据转发表将IP数据报从合适的端口转发出去。

### SDN的基本概念

**软件定义网络**（Software Definition Network，SDN）：
- 结构：两个由控制-数据接口连接的分离平面
	- 控制平面：集中式，远程控制器通过软件和接口对数据平面的路由器集中控制
	- 数据平面：分布式，各路由器根据远程控制器维护的路由表进行分组转发
- 接口：
	- 北向接口：SDN对上层应用开发者提供的编程接口。
	- 南向接口：SDN控制器通过南向接口协议（如Openflow）与转发设备建立双向会话的接口。
- 优点：
	- 全局集中式控制和分布式高速转发：利于控制平面的全局优化，也利于高性能的网络转发。
	- 灵活可编程与性能的平衡：控制和转发功能分离后，使得网络可以由专有的自动化工具以编程方式配置。
	- 降低成本：控制与数据平面分离后，可以实现网络设备制造和功能软件开发的分离，降低成本。
- 问题：
	- 安全风险：集中管理易受攻击，如果崩溃将影响整个网络。
	- 瓶颈问题：随着网络规模扩大，控制器可能成为网络性能的瓶颈。

![[Pasted image 20230701103443.png]]

### 拥塞控制

拥塞：在通信子网中，因出现过量分组而引起网络性能下降的现象。

判断网络拥塞的方法：观察网络的吞吐量和负载的关系。
- 吞吐量偏低：轻度拥塞
- 吞吐量低：拥塞
- 吞吐量为零：死锁

**拥塞控制**：
- 解决的问题：如何获取网络中发生拥塞的信息，并利用信息进行控制，以避免由于拥塞造成分组的丢失，以及严重拥塞引发的网络死锁现象。
- 与流量控制的区别：流量控制的核心思想是抑制点对点通信中的发送端，拥塞控制则确保网络内所有终端间的通信能力。
- 方法：
	- **开环控制**：静态方法，设计网络时事先考虑拥塞因素，而非考虑当前网络的状态，包括：确定何时可接收新流量、何时丢弃分组、丢弃哪些分组。
	- **闭环控制**：动态方法，事先不考虑拥塞因素，而是用监测网络系统检测拥塞，将拥塞信息传到合适的地方，以便调整网络的运行，并解决出现的问题。

## 路由算法

### 静态路由和动态路由

**静态路由算法**（**非自适应路由算法**）：网络管理员手工配置路由信息，当网络结构变更时需要手动调整。不能及时适应网络状态的变化。

**动态路由算法**（**自适应路由算法**）：路由器上的路由表项是通过相邻路由器间彼此交换信息，并按照一定算法优化出来的，会在一定时间内不断更新，以适应不断变化的网络。

比较：
- 静态路由算法：开销小，简便，适用于拓扑变化不大的小型网络。
- 动态路由算法：改善网络性能并有助于流量控制，但算法复杂，会增加网络负担。

两种常见的动态路由算法：距离-向量路由算法、链路状态路由算法。

### 距离-向量路由算法

