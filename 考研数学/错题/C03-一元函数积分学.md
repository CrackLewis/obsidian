
## 进度

- [x] 全书基础
- [x] 660题
- [x] 张宇30讲
- [ ] 高数18讲
- [ ] 张宇1000题

## 张宇30-P128：原函数和定积分的存在性

在区间$[-1,2]$上，说明下列函数是否有原函数，是否有定积分：
- $f_1(x)=\left\{\begin{matrix}2, & x>0,\\ 1,&x=0,\\ -1, & x<0\end{matrix}\right.$
- $f_2(x)=\left\{\begin{matrix}2x\sin \dfrac{1}{x^2}-\dfrac{2}{x}\cos \dfrac{1}{x^2}, & x\neq 0, \\ 0, & x=0\end{matrix}\right.$
- $f_3(x)=\left\{\begin{matrix}\dfrac{1}{x}, & x\neq 0,\\ 0, & x=0\end{matrix}\right.$
- $f_4(x)=\left\{\begin{matrix}2x\cos \dfrac{1}{x}+\sin \dfrac{1}{x}, & x\neq 0,\\ 0, & x=0\end{matrix}\right.$

**思路**：

$f_1(x)$在$x=0$处有跳跃间断点，因此在区间内没有原函数和定积分。

$f_2(x)$在$x=0$处有振荡间断点。通过构造可以构造出$F_2(x)$，使得$F_2'(x)=f_2(x)$：
$$
F_2(x)=\left\{\begin{matrix}
x^2\sin \dfrac{1}{x^2}, & x\neq 0,\\
0, & x=0
\end{matrix}\right.
$$
可见$f_2(x)$有原函数。但由于$f_2(x)$在$x=0$的任一邻域内无界，所以在区间内无定积分。

$f_3(x)$在$x=0$处有无穷间断点，因此不存在原函数和定积分。

$f_4(x)$在$x=0$处有振荡间断点。通过构造可以构造出$F_4(x)$，使得$F_4'(x)=f_4(x)$：
$$
F_4(x)=\left\{\begin{matrix}
x^2\cos \dfrac{1}{x}, & x\neq 0, \\
0, & x=0
\end{matrix}\right.
$$
可见$f_4$有原函数。而$f_4(x)$在$x=0$附近有界，所以在区间内有定积分。

**总结**：
参考[[Z03-一元函数积分学#^de11d1|不定积分存在定理]]的有关内容：
- 连续函数$f(x)$必有原函数$F(x)$。
- 含有第一类间断点和无穷间断点的函数$f(x)$在包含该间断点的区间内无原函数。

含有振荡间断点的函数比较特殊，可能存在原函数也可能不存在。如果原函数存在，则若函数**在闭区间内有界且有有限个振荡间断点**，则定积分也存在。

## 张宇30-P131：原函数的奇偶性

设$f(x)$连续，则下列两个函数中必为偶函数的是：
- $\displaystyle\int_0^x t[f(t)-f(-t)]dt$
- $\displaystyle\int_0^x t[f(t)+f(-t)]dt$

**思路**：
函数$g(x)=x[f(x)-f(-x)]$必为偶函数，$h(x)=x[f(x)+f(-x)]$必为奇函数。因此它们基于$x=0$的变上限积分函数分别为奇函数和偶函数。

因此第二个函数必为偶函数。

**总结**：
当时没转过弯来，选了第一个。

## 张宇30-P131：定积分的保号性

设$f(x)$在$[a,b]$上非负连续，且$f(x)$不恒为零，证明必有$\displaystyle\int_a^b f(x)dx>0$。

**思路**：
根据题意，存在$x_0\in(a,b)$，满足$f(x_0)>0$。

因函数连续，故有$\displaystyle\lim_{x\rightarrow x_0} f(x_0)=f(x_0)>0$，由极限的保号性知，存在$\delta>0$和$\eta>0$，使得当$x_0\in[x_0-\delta,x_0+\delta]$时，恒有$f(x)\ge \eta\ge 0$。

根据定积分的不等式性质，有：
$$
\int_a^b f(x)dx\ge \int_{x_0-\delta}^{x_0+\delta} f(x)dx\ge \eta\int_{x_0-\delta}^{x_0+\delta} dx=2\eta\delta>0
$$

**总结**：
保号性允许进行定量分析，具体是设邻域半径$\delta$和边界宽度$\eta$。

## 张宇30-P132：凑微分法计算不定积分

计算$\displaystyle\int \dfrac{1}{\sqrt{x(1-x)}}dx$。

**思路**：
考虑提出$\sqrt{x}$并拼凑微元$d\sqrt{x}$：
$$
\begin{split}
\int \dfrac{1}{\sqrt{x(1-x)}}dx&=\int \dfrac{2}{\sqrt{1-x}}d\sqrt{x}\\
&=2\int \dfrac{1}{\sqrt{1-(\sqrt{x})^2}}d\sqrt{x}=2\arcsin \sqrt{x}+C
\end{split}
$$

**总结**：
一个比较经典的题目了。对分母带根号的原则是应用凑微分法或换元法优先进行处理。

## 张宇30-P133：分母带根号类不定积分的推导

求$\displaystyle\int \dfrac{dx}{\sqrt{x^2-a^2}}$（$a>0$）。

**思路**：
设$x=a\sec t$，有$dx=a\sec t\tan tdt$。

当$0<t<\dfrac{\pi}{2}$时，$x=a\sec t>0$，且存在反函数，因此：
$$
\begin{split}
\int \dfrac{dx}{\sqrt{x^2-a^2}}&=\int \dfrac{a\sec t\tan t}{a\tan t}dt=\int \sec tdt\\
&=\ln(\sec t+\tan t)+C_1=\ln(x+\sqrt{x^2-a^2})+C
\end{split}
$$
当$\dfrac{\pi}{2}<t<\pi$时，$x=a\sec t<0$，且存在反函数，因此：
$$
\begin{split}
\int \dfrac{dx}{\sqrt{x^2-a^2}}&=-\int \sec tdt=\ln(-x-\sqrt{x^2-a^2})+C
\end{split}
$$
综合起来有：
$$
\int \dfrac{dx}{\sqrt{x^2-a^2}}=\ln\left|x+\sqrt{x^2-a^2}\right|+C
$$

**总结**：
本来不想记录本题的，但突然感觉有必要说明类似类型的不定积分是如何推导的。本题的这个积分是通过三角换元计算的，同时需要处理还原前后的符号变化问题。

## 张宇30-P134：凑微分法计算不定积分

求$\displaystyle\int\dfrac{1}{1+\sin x}dx$。

**思路**：
可以通过三角恒等变形计算：
$$
\int \dfrac{1}{1+\sin x}dx=\int \dfrac{1-\sin x}{\cos^2 x}dx=\tan x-\dfrac{1}{\cos x}+C
$$
也可以通过分母配方进行计算：
$$
\begin{split}
\int \dfrac{1}{1+\sin x}dx&=\int \dfrac{dx}{\left(\cos \dfrac{x}{2}+\sin \dfrac{x}{2}\right)^2}=\int \dfrac{\sec^2 \dfrac{x}{2}}{\left(1+\tan \dfrac{x}{2}\right)^2}dx \\
&=2\int \dfrac{d\left(1+\tan \dfrac{x}{2}\right)}{\left(1+\tan \dfrac{x}{2}\right)^2}=-\dfrac{2}{1+\tan \dfrac{x}{2}}+C
\end{split}
$$

**总结**：
碰到这题好几回了，每次都错。核心矛盾仍然是背那几个基本的定积分。

## 张宇30-P134：换元法和分部积分法计算不定积分

求$\displaystyle\int (\arcsin x)^2dx$。

**思路**：
分部积分法和凑微分法适用于本题的计算：
$$
\begin{split}
\int (\arcsin x)^2 dx&=x(\arcsin x)^2-\int \dfrac{2x\arcsin x}{\sqrt{1-x^2}}dx \\
&=x\arcsin^2 x+2\int \arcsin xd(\sqrt{1-x^2}) \\
&=x\arcsin^2 x+2\sqrt{1-x^2}\arcsin x-2x+C
\end{split}
$$
另外，换元法也可以做。令$u=\arcsin x$，则$x=\sin u$，$dx=\cos udu$：
$$
\begin{split}
\int (\arcsin^2 x)dx&=\int u^2 \cos udu=\int u^2d(\sin u)\\
&=u^2\sin u-\int 2u\sin udu\\
&=u^2\sin u-2\left[u(-\cos u)-\int (-\cos u)du\right] \\
&=u^2\sin u+2u\cos u-2\sin u+C\\
&=x\arcsin^2 x+2\sqrt{1-x^2}\arcsin x-2x+C
\end{split}
$$

**总结**：
$(\arcsin x)^k$等初等函数的幂相对更适合使用分部积分法计算不定积分。

## 张宇30-P134：求不定积分的综合题

求$\displaystyle\int \dfrac{xe^{\arctan x}}{(1+x^2)^{\frac{3}{2}}}dx$。

**思路**：
分部法是可行的，但要进行两次分部积分，最后还需要解出积分：
$$
\begin{split}
\displaystyle\int \dfrac{xe^{\arctan x}}{(1+x^2)^{\frac{3}{2}}}dx &= \int \dfrac{x}{\sqrt{1+x^2}}d(e^{\arctan x})=\dfrac{xe^{\arctan x}}{\sqrt{1+x^2}}-\int \dfrac{e^{\arctan x}}{(1+x^2)^{\frac{3}{2}}}dx \\
&= \frac{xe^{\arctan x}}{\sqrt{1+x^2}}-\int \frac{1}{\sqrt{1+x^2}}d(e^{\arctan x})\\
&=\frac{(x-1)e^{\arctan x}}{\sqrt{1+x^2}}-\int \dfrac{xe^{\arctan x}}{(1+x^2)^{\frac{3}{2}}}dx
\end{split}
$$
解得：
$$
\int \frac{xe^{\arctan x}}{(1+x^2)^{\frac{3}{2}}}dx=\frac{(x-1)e^{\arctan x}}{2\sqrt{1+x^2}}+C
$$

另外，设$x=\tan t$，也可通过换元法解：
$$
I=\int \frac{e^t\tan t}{(1+\tan^2 t)^{\frac{3}{2}}}\sec^2t dt=\int e^t\sin tdt
$$
又$\displaystyle\int e^t\sin t dt=\dfrac{1}{2}e^t(\sin t-\cos t)+C$，所以：
$$
I=\frac{(x-1)e^{\arctan x}}{2\sqrt{1+x^2}}+C
$$

**总结**：
如果对$\int uvdx$进行多次分部积分，应当尽量避免对同一个部分进行多次积分，除非是积分特别显然或者明显能够简化运算的情形。

## 张宇30-P139：定积分的计算

求$\displaystyle \int_{-1}^1 x^2\sqrt{1-x^2}dx$。

**思路**：
通过换元$x=\sin t$易得：
$$
I=\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \sin^2 t\cos^2 t dt=\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} (\sin^2 t-\sin^4 t)dt
$$
根据华里士公式得知：
$$
I=2\int_0^{\frac{\pi}{2}} (\sin^2 t-\sin^4 t)dt=2\left(\dfrac{1}{2}\cdot\dfrac{\pi}{2}-\dfrac{3}{4}\cdot\dfrac{1}{2}\cdot\dfrac{\pi}{2}\right)=\frac{\pi}{8}
$$

**总结**：
积极运用换元法和华里士公式解决带$\sqrt{a^2-x^2}$的定积分。

**华里士公式**：
设$I_1=\displaystyle\int_0^{\frac{\pi}{2}} \sin^n xdx$，$I_2=\displaystyle\int_0^{\frac{\pi}{2}} \cos^n xdx$。则： ^e96474
$$
I_1=I_2=\left\{
\begin{matrix}
\dfrac{n-1}{n}\cdot\dfrac{n-3}{n-2}\cdot \cdots\cdot\dfrac{4}{5}\cdot\dfrac{2}{3}, & n为奇数,\\
\dfrac{n-1}{n}\cdot\dfrac{n-3}{n-2}\cdot \cdots\cdot\dfrac{3}{4}\cdot\dfrac{1}{2}\cdot\dfrac{\pi}{2}, & n为偶数
\end{matrix}
\right.
$$

## 张宇30-P140：换元法计算定积分

求$\displaystyle\int_0^{\frac{\pi}{4}} \ln(1+\tan x)dx$。

**思路**：
令$x=\dfrac{\pi}{4}-t$，得$\tan x=\dfrac{1-\tan t}{1+\tan t}$，则：
$$
\begin{split}
\int_0^{\frac{\pi}{4}} \ln(1+\tan x)dx&=\int_{\frac{\pi}{4}}^0 \ln\dfrac{2}{1+\tan t}(-dt)\\
&=-\int_0^{\frac{\pi}{4}}\ln(1+\tan t)dt+\int_0^{\frac{\pi}{4}}\ln 2dt\\
&=\frac{\pi}{4}\ln 2-\int_0^{\frac{\pi}{4}}\ln(1+\tan x)dx
\end{split}
$$
解得：
$$
\displaystyle\int_0^{\frac{\pi}{4}} \ln(1+\tan x)dx=\frac{\pi}{8}\ln 2
$$

**总结**：
众多定积分的计算问题都会用到定积分的“区间再现公式”： ^de2aa5
$$
\int_a^b f(x)dx=\int_a^b f(a+b-x)dx
$$
对于本题，则是通过换元构造了区间的再现形式。

## 张宇30-P111：华里士公式的应用

求$I=\displaystyle\int_{0}^6 x^2\sqrt{6x-x^2}dx$。

**思路**：
令$x=3+3\sin t$，有：
$$
\begin{split}
I&=\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} (3+3\sin t)^2 \sqrt{9-9\sin^2 t}\cdot 3\cos tdt \\
&=81\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} (1+\sin t)^2 \cos^2 tdt\\
&=81\left[\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}}\cos^2 tdt+\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}}\sin^2 t\cos^2 tdt+2\int_{-\frac{\pi}{2}}^{\frac{\pi}{2}} \sin t\cos^2 tdt \right]\\
&=162I_2+162(I_2-I_4)=\frac{405}{8}\pi
\end{split}
$$

**总结**：
注意倒数第二行的那一项是奇函数，因此取值是0。

## 张宇30-P143：超越函数的定积分

设$f(x)=\displaystyle\int_1^{x^2} e^{-t^2}dt$，求$I=\displaystyle\int_0^1 xf(x)dx$。

**思路**：
$f(x)$本身是不可积函数，所以要尽可能使用其他积分办法而不是直接求$f(x)$的原函数。

根据分部积分公式：
$$
\int_0^1 xf(x)dx=\left.\frac{x^2}{2}f(x)\right|_{0}^1-\int_0^1 \frac{x^2}{2}f'(x)dx
$$
可见，如果能得出$f(1),f'(x)$，即可求出$I$。

发现$f(1)=0$，又$f'(x)=e^{-x^4}(x^2)'=2xe^{-x^4}$，因此：
$$
\begin{split}
\int_0^1 xf(x)dx&=-\int_0^1 \frac{x^2}{2}\cdot 2xe^{-x^4}dx=-\int_0^1 x^3e^{-x^4}dx=\frac{1}{4}\int_0^1 e^{-x^4}d(-x^4)\\
&=\left.\frac{1}{4} e^{-x^4}\right|_{0}^1=\frac{1}{4}(e^{-1}-1)
\end{split}
$$

**总结**：
当被积的积分中有超越函数时，可以考虑构造分部积分形$\int udv$，其中$u$为超越函数，则求积分时可以避免直接求其积分。

## 张宇30-P144：变限积分函数求导

设$f(x)$连续，求$\dfrac{d}{dx}\left[\displaystyle\int_0^x tf(x^2-t^2)dt\right]$。

**思路**：
设$x^2-t^2=u$，则$du=-2tdt$，因此：
$$
\begin{split}
\dfrac{d}{dx}\left[\displaystyle\int_0^x tf(x^2-t^2)dt\right]&=-\frac{1}{2}\frac{d}{dx}\left[\int_{x^2}^0 f(x^2-t^2)d(x^2-t^2)\right]\\
&=\frac{1}{2}\frac{d}{dx}\int_0^{x^2} f(u)du\\
&=\frac{1}{2}\cdot 2xf(x^2)=xf(x^2)
\end{split}
$$

**总结**：
如果被积函数中的某一项出现了$x,t$的混合项，**必须**通过换元方式消解掉。

## 张宇30-P145：反常积分的求解

求$\displaystyle\int_{\frac{1}{2}}^{\frac{3}{2}} \dfrac{dx}{\sqrt{|x-x^2|}}$。

**思路**：
首先，由于瑕点$x=1$在区间内部，所以必须以该点为中心，分拆为两个无界区间的反常积分：
$$
\begin{split}
I&=I_1+I_2=\int_{\frac{1}{2}}^{1}\frac{dx}{\sqrt{x-x^2}}+\int_{1}^{\frac{3}{2}}\frac{dx}{\sqrt{x^2-x}} \\
\end{split}
$$
用换元法计算$I_1$：
$$
I_1=2\int_{\frac{1}{2}}^1 \frac{1}{\sqrt{1-(\sqrt{x})^2}}d(\sqrt{x})=\left[2\arcsin \sqrt{x}\right]_{\frac{1}{2}}^{1}=\frac{\pi}{2}
$$
用配方法或换元法计算$I_2$：
$$
I_2=2\int_1^{3/2} \frac{1}{\sqrt{(\sqrt{x})^2-1}}d(\sqrt{x})=\left[2\ln(\sqrt{x}+\sqrt{x-1})\right]_{1}^{3/2}=\ln(2+\sqrt{3})
$$
因此$I=\ln(2+\sqrt{3})+\dfrac{\pi}{2}$。

**总结**：
一刷时由于马虎，算错了$I_1$，二刷注意。

## 张宇30-P147：反常积分的敛散性讨论

讨论$I=\displaystyle\int_2^{+\infty} \dfrac{1}{x\ln^p x}dx$的敛散性。

**思路**：
本题很巧的是$x$的指数正好卡在1上，导致对$p$需要讨论。

对任意$p\neq 1$，有：
$$
I=\int_2^{+\infty} \frac{1}{\ln^p x}d(\ln x)=\left[\frac{1}{1-p}\ln^{1-p}x\right]_{2}^{+\infty}
$$
当$p=1$时，积分式等于$\left[\ln|\ln x|\right]_{2}^{+\infty}$，发散。

当$p<1$时，积分式发散；当$p>1$时，积分式收敛。

**总结**：
一个挺特殊的题目，启示：敛散性有时需要求出全部或部分积分式，才能准确地分析出，而不是仅仅依赖以幂为标准的审敛法。

## 张宇30-P157：极坐标图形的面积计算

计算心形线$r=a(1+\cos \theta)$（$a>0,0\le \theta< 2\pi$）所围成的图形的面积。

**思路**：
使用极坐标面积计算公式：
$$
S=\dfrac{1}{2}\int_0^{2\pi}r^2d\theta=\dfrac{a^2}{2}\int_0^{2\pi} (1+\cos \theta)^2d\theta=\dfrac{3a^2}{4}\pi
$$

**总结**：
极坐标面积计算公式必须记忆。核心思想是：根据角度微元划分出若干曲边三角形，计算它们的面积总和。

## 全书基础-P111：不定积分的计算

求$I=\displaystyle\int \dfrac{1}{x} \sqrt{\dfrac{x+2}{x-2}} dx$。

**思路**：
设$t=\sqrt{\dfrac{x+2}{x-2}}$，则$x=\dfrac{2(t^2+1)}{t^2-1}$，$\dfrac{dx}{dt}=-\dfrac{8t}{(t^2-1)^2}$。
通过换元法计算出：
$$
\begin{split}
I=\int \dfrac{4t^2}{(1-t^2)(1+t^2)}dt=\ln\left|\dfrac{1-t}{1+t}\right|-2\arctan t+C
\end{split}
$$
到这一步是容易的。但是代回$x$时，需要注意定义域的限制，不能轻易恒等变形，只有下面的形式是正确的：
$$
I=\ln\left|\dfrac{1-\sqrt{(x+2)/(x-2)}}{1+\sqrt{(x+2)/(x-2)}}\right|-2\arctan \sqrt{\dfrac{x+2}{x-2}}+C
$$
如果把$\ln$内部的分式化简，就会造成定义域不一致。

**总结**：
求不定积分要考虑被积函数的定义域限制，积出的不定积分也必须服从这一限制。

## 全书基础-P114：分部积分法求解定积分

设$G'(x)=\arcsin(x-1)^2$，$G(0)=0$，求$I=\displaystyle\int_0^1 G(x)dx$。

**思路**：
对$G'(x)$求两次原函数比较困难。考虑用分部积分法构造积分式和$G'(x)$的关系：
$$
\begin{split}
I&=\int_0^1 G(x)dx=\left.xG(x)\right|_{0}^1-\int_0^1 xG'(x)dx\\
&=G(1)-\int_0^1 xG'(x)dx\\
&=\int_0^1 G'(x)dx-\int_0^1 xG'(x)dx\\
&=-\int_0^1(x-1)\arcsin(x-1)^2 d(x-1) \\
&=-\dfrac{1}{2}\int_0^1 \arcsin(x-1)^2 d(x-1)^2\\
&\overset{t=(x-1)^2}{=} \dfrac{1}{2}\int_0^1\arcsin tdt\\
&=\dfrac{1}{2}\left(t\arcsin t|_0^1-\int_0^1 \dfrac{t}{\sqrt{1-t^2}}dt\right)\\
&=\dfrac{1}{2}\left(\dfrac{\pi}{2}-1\right)=\dfrac{\pi}{4}-\dfrac{1}{2}
\end{split}
$$

**总结**：
解答中的第一次分部积分法（$u=x,v=f(x)$）可以建立起函数“三代”的联系：
$$
\int f(x)dx=F(x)=xf(x)-\int xf'(x)dx
$$
通过第二次分部积分法，可以求解$\arcsin x$的积分。

## 全书基础-P118：区间复现公式求定积分

求$I=\displaystyle\int_0^{\pi} \dfrac{x\sin x}{1+\cos^2 x}dx$。

**思路**：
根据区间复现公式，去除$x$项：
$$
I=\displaystyle\int_0^{\pi} \dfrac{x\sin x}{1+\cos^2 x}dx=\pi\int_0^{\frac{\pi}{2}} \dfrac{\sin x}{1+\cos^2 x}dx=\pi I_1
$$
求$I_1$需要凑微分：
$$
\begin{split}
I_1&=-\int_0^{\pi/2} \dfrac{1}{1+\cos^2 x}d(\cos x)\\
&=\int_0^1 \dfrac{1}{1+t^2}dt=\left[\arctan t\right]_0^1=\dfrac{\pi}{4}
\end{split}
$$
因此$I=\dfrac{\pi^2}{4}$。

**总结**：
区间复现公式可以简化以三角函数形为主的积分式。

## 全书基础-P122：反常积分相关的结论判断

下列积分有关的结论中不正确的有：
- $\displaystyle\int_{-\infty}^{+\infty} x^2e^{-x^2}dx=\dfrac{\sqrt{\pi}}{2}$。
- $\displaystyle\int_{-1}^1 \dfrac{\sin x^2}{x}dx=0$。
- $\displaystyle\int_{-\infty}^{+\infty} \dfrac{x}{1+x^2}dx=0$。
- $\displaystyle\int_{-\infty}^{+\infty} \dfrac{x}{(1+x^2)^2}dx=0$。

**思路**：
第一个结论是正确的。根据分部积分法分析：
$$
\int_{-\infty}^{+\infty} x^2e^{-x^2}dx=-\dfrac{1}{2} \int_{-\infty}^{+\infty} xde^{-x}=-\dfrac{1}{2}\left(xe^{-x^2}|_{-\infty}^{+\infty} - \int_{-\infty}^{+\infty} e^{-x^2}dx\right)=\dfrac{1}{2}\int_{-\infty}^{+\infty} e^{-x^2}dx
$$
而转化后的积分是一个类似正态分布函数的积分：
$$
\int_{-\infty}^{+\infty} e^{-x^2}dx=\sqrt{\pi}
$$
所以代回检验，第一个结论是正确的。

第二个结论是正确的。注意的是，该积分虽然在$x=0$处无定义，但由于它不是无穷间断点，所以**不是反常积分**。$x=0$两侧符合点对称性，因此第二个结论是正确的。

第三个结论是错误的。取$[0,+\infty)$一侧分析，有：
$$
\int_0^{+\infty}\dfrac{x}{1+x^2}dx=\left.\dfrac{1}{2}\ln(1+x^2)\right|_0^{+\infty}=\dfrac{1}{2}\lim_{b\rightarrow +\infty} \ln(1+b^2)
$$
结果发散。尽管被积函数是奇函数，但在两侧区间和积分均无穷的情形下**不能使用对称性**，所以该积分发散，结论错误。

第四个结论是正确的。取$[0,+\infty)$一侧分析，有：
$$
\int_0^{+\infty} \dfrac{x}{(1+x^2)^2}dx=-\dfrac{1}{2}\left.\left(\dfrac{1}{1+x^2}\right)\right|_0^{+\infty}=\dfrac{1}{2}
$$
结果收敛。被积函数是奇函数，且两侧积分均有限，可以运用对称性，结论成立。

因此第一、二、四个结论正确，第三个结论错误。

**总结**：
全定义域下两侧积分均为无穷，则不能应用对称性说明全区间积分为零。很简单的道理，无穷减无穷不是零。

## 660-T52：不定积分的求解

求$I=\displaystyle\int \sqrt{\dfrac{3-2x}{3+2x}}dx$。

**思路**：
可以直接积分做，思路是分子有理化后拆分：
$$
\begin{split}
I&=\int \dfrac{3-2x}{\sqrt{9-4x^2}}dx=\dfrac{3}{2}\int \dfrac{d(
\dfrac{3}{2}x)}{\sqrt{1-(\dfrac{3}{2}x)^2}}+\dfrac{1}{4}\int \dfrac{d(9-4x^2)}{\sqrt{9-4x^2}}\\
&=\dfrac{3}{2}\arcsin \dfrac{2x}{3}+\dfrac{1}{2}\sqrt{9-4x^2}+C
\end{split}
$$

另一种主流思路是换元，设$t=\sqrt{\dfrac{3-2x}{3+2x}}$，则$x=\dfrac{3(1-t^2)}{2(1+t^2)}$：
$$
I=\int \dfrac{-6t^2}{(1+t^2)^2}dt
$$
可以换元做：
$$
\begin{split}
I&=\int 3td\left(\dfrac{1}{1+t^2}\right)=\dfrac{3t}{1+t^2}-\int \dfrac{3}{1+t^2}dt\\
&=\dfrac{1}{2}\sqrt{9-4x^2}-3\arctan\sqrt{\dfrac{3-2x}{3+2x}}+C
\end{split}
$$
也可以用有理函数的积分法得出相同的结果。

**总结**：
当时被$\dfrac{1}{(x^2+1)^2}$的不定积分卡了，可以考虑用$\arctan x$和其他有理函数凑：
$$
\int \dfrac{1}{(x^2+1)^2}dx=\dfrac{1}{2}\left(\arctan x+\dfrac{x}{1+x^2}\right)+C
$$

## 660-T54：不定积分的计算

求$I=\displaystyle\int \dfrac{xe^x}{\sqrt{1+e^x}}dx$。

**思路**：
第一反应自然是换元（$t=\sqrt{1+e^x}$），也可以做，但不是收录此题的理由。

下面提出一种分部积分法解决本题的方法：
$$
\begin{split}
I&=\int xd(\sqrt{1+e^x})=2\left[x\sqrt{1+e^x}-\int \sqrt{1+e^x}dx\right]
\end{split}
$$
其中（$t=\sqrt{1+e^x}$）：
$$
\int \sqrt{1+e^x}dx=\int \dfrac{2t^2}{t^2-1}dt=2t+\ln\dfrac{t-1}{t+1}+C=2\sqrt{1+e^x}+\ln\frac{\sqrt{1+e^x}-1}{\sqrt{1+e^x}+1}+C
$$
因此：
$$
I=(2x-4)\sqrt{1+e^x}-2\ln\dfrac{\sqrt{1+e^x}-1}{\sqrt{1+e^x}+1}+C
$$

**总结**：
二刷做对了，看看思路就行。

## 660-T65：分段函数求变限积分

设$f(x)=\max\{1,x^2\}$，求$\displaystyle\int_1^x f(t)dt$。

**思路**：
不难求解出$f(x)$的不定积分：
$$
\int f(x)dx=\left\{\begin{matrix}
\dfrac{x^3}{3}-\dfrac{2}{3}+c, & x<-1,\\
x+c, & -1\le x\le 1,\\
\dfrac{x^3}{3}+\dfrac{2}{3}+c, & x>1
\end{matrix}\right.
$$
但直接将不定积分作为变限积分函数不行。单侧的变限积分函数有一个特点，就是定限一侧的函数值为0，即：
$$
\left[\int_1^x f(t)dt\right]_{1}=\int_1^1 f(t)dt=0
$$
解得$c=-1$，即：
$$
\int_1^x f(t)dt=\left\{\begin{matrix}
\dfrac{x^3}{3}-\dfrac{5}{3}, & x<-1,\\
x-1, & -1\le x\le 1,\\
\dfrac{x^3}{3}-\dfrac{1}{3}, & x>1
\end{matrix}\right.
$$

**总结**：
单侧变限（变上限、变下限）积分函数的一侧函数值为零，可用于确定唯一的变限积分函数。

## 660-T71：旋转曲面的面积计算

星形线方程
$$
\left\{\begin{matrix}
x=a\cos^3 t\\
y=a\sin^3 t
\end{matrix}\right.
$$
确定的曲线绕$x$轴旋转形成一个闭合曲面。求闭合曲面的表面积。

**思路**：
函数$y=f(x)$（$a\le x\le b$）绕$x$轴旋转形成的曲面的表面积：
$$
S=2\pi\int_a^b |y|\sqrt{1+[y'(x)]^2}dx
$$
套用到本题上，有：
$$
S=2\cdot 2\pi\int_0^a a|\sin^3 t|\sec tdx=2\cdot 6\pi a^2 \int_{0}^{\frac{\pi}{2}}\sin^4td(\sin t)=\dfrac{12}{5}\pi a^2
$$

**总结**：
注意那个$\sqrt{1+y'^2}$，做的时候总是算错。

## 660-T73：平面区域的质心计算

求由方程$y^2=\dfrac{x}{9}(3-x)^2$（$0\le x\le 3$）围成的均匀平面区域的质心坐标。

**思路**：
易知该图形是上下对称的，因此$\bar{y}=0$。

根据质心坐标公式：
$$
\bar{x}=\dfrac{\displaystyle\int_0^3 xydx}{\displaystyle\int_0^3 ydx}=\dfrac{\int_0^3 x(3-x)\sqrt{x}dx}{\int_0^3 (3-x)\sqrt{x}dx}=\dfrac{9}{7}
$$

因此质心坐标$\left(\dfrac{9}{7},0\right)$。

**总结**：
质心坐标公式：
$$
\bar{x}=\dfrac{\displaystyle\int xydx}{\displaystyle\int ydx},\bar{y}=\dfrac{\displaystyle\int xydy}{\displaystyle\int xdy}
$$

## 660-T75：与积分学相关的物理问题

设无穷长直线的线密度为$1$，引力常数为$k$，则直线对距直线为$a$的单位质点的引力为多少？

**思路**：
在题目描述下，以直线方向为$x$轴建系，则直线微元$dx$对单位质点的引力：
$$
dF=k\dfrac{dx}{a^2+x^2}
$$
不失一般性假设质点坐标为$(0,a)$，则由于直线关于$y$轴对称，所以$F$的$x$轴分量被抵消，因此只需要根据夹角计算$y$轴分量（设质点与微元连线和$x$轴夹角为$\theta$）：
$$
dF_y=\cos\theta dF=\dfrac{a}{\sqrt{a^2+x^2}}dF=\dfrac{ka}{(a^2+x^2)^{\frac{3}{2}}}dx
$$
整条直线对质点的引力可以通过微元法计算：
$$
F=\int_{-\infty}^{+\infty} dF_y=2\int_0^{+\infty} \dfrac{ka}{(a^2+x^2)^{\frac{3}{2}}}dx=2\int_{0}^{\pi/2} \dfrac{k}{a}\cos tdt=\dfrac{2k}{a}
$$

**总结**：
跪了。

## 660-T177：带振荡间断点函数的变限积分

设$f(x)=\left\{\begin{matrix}\sin\dfrac{1}{x}, & x\neq 0\\ 1, & x=0\end{matrix}\right.$，$F(x)=\displaystyle\int_{-1}^x f(t)dt$，则下列说法正确的是：
- $F(x)$在$(-1,1)$为无界函数。
- $F(x)$在$(-1,1)$为连续有界函数。
- $F(x)$在$(-1,1)$有间断点$x=0$。
- $F(x)$在$[-1,1]$不可积。

**思路**：
第一种说法是错误的，因为$f(x)$是有界函数，所以$F(x)$在有限区间内也必然有界。

第二种说法是正确的。$f(x)$在$x=0$处有振荡间断点，但是该点处函数有界，所以原函数仍然存在且连续。结合前一种说法，得知该说法正确。

第三种说法是错误的。$x=0$处是取值有界的振荡间断点，虽然原函数不一定可导，但一定在$x=0$处连续。

第四种说法是错误的。$F(x)$在$[-1,1]$显然可积，且积分恰为零。

**总结**：
之前纠结过一次原函数和积分存在性的问题，今天做一个简单复盘：
- 原函数若存在，则一定连续；若函数连续，则原函数一定可导。
- 函数有第一类间断点或无穷间断点，则在包含其的区间内无原函数，但**不一定不可积**。

## 660-T181：定区间内可积函数的性质

下列命题中正确的是：
- 设$f(x)$在$[a,b]$可积，$f(x)\ge 0$，且$f(x)\not\equiv 0$，则$\displaystyle\int_a^b f(x)dx> 0$。
- 设$f(x)$在$[a,b]$可积，$g(x)$在$[a,b]$不可积，则$f(x)+g(x)$在$[a,b]$不可积。
- 设$f^2(x)$在$[a,b]$可积，则$f(x)$在$[a,b]$可积。
- 设$x_0\in(a,b)$，$f(x)$在$[a,b]/\{x_0\}$连续且有界，$x=x_0$是$f(x)$的间断点，则$F(x)=\displaystyle\int_a^x f(t)dt$在$x=x_0$不可导。

**思路**：
第一个命题是错的。因为$f(x_0)\neq 0$的点可能恰好只有一个或有限个跳跃间断点，此时$f(x)$在$[a,b]$仍然可积，但不满足$\displaystyle\int_a^b f(t)dt>0$。

第二个命题是正确的。

第三个命题是错误的。

第四个命题是错误的。如果$x=x_0$是振荡间断点或可去间断点，则$F(x)$在$x=x_0$可导。

**总结**：
这道题比较乱，需要再看。

## 660-T189：定积分的计算

求$I=\displaystyle\int_0^1 x^4\sqrt{\dfrac{1+x}{1-x}}dx$。

**思路**：
换元（$t=\sqrt{\dfrac{1+x}{1-x}}$），得：
$$
I=\int_1^{+\infty} \dfrac{4t^2(t^2-1)^4}{(t^2+1)^6}dt
$$
再次换元（$t=\tan\dfrac{u}{2}$），得：
$$
I=\int_{\pi/2}^{\pi} \dfrac{\cos^4 u\sin^2 u}{1+\cos u}du
$$
随后的这个变换很关键（$\dfrac{\sin u}{1+\cos u}=\dfrac{1-\cos u}{\sin u}$）：
$$
\begin{split}
I&=\int_{\pi/2}^{\pi} (\cos^4 u-\cos^5 u)du=\int_0^{\pi/2} \cos^4udu+\int_{0}^{\pi/2} \cos^5udu\\
&=\dfrac{3\cdot 1\cdot \pi}{4\cdot 2\cdot 2}+\dfrac{4\cdot 2}{5\cdot 3}=\dfrac{3}{16}\pi+\dfrac{8}{15}
\end{split}
$$

**总结**：
如果三角换元后，被积式中正弦或余弦次数较高、且被积区间只有$\dfrac{\pi}{4}$，则考虑换元时用半角换元：$t=\tan \dfrac{u}{2}$。

另外，恒等变形也是很重要的。

## 660-T197：固定区间长度的变限积分函数分析

函数$F(x)=\displaystyle\int_{x}^{x+\pi} \ln(1+\cos^2 t)\cos 2tdt$在全定义域是否恒为常数？如是，判断其符号，否则说明理由。

**思路**：
首先需要发现$F(x)=F(0)$。因此$F(x)$是常数，需要判断下面这个定积分的符号：
$$
I=\int_0^{\pi} \ln(1+\cos^2 t)\cos 2tdt
$$
利用分部积分法作变换：
$$
\begin{split}
I&=\dfrac{1}{2}\left[\ln(1+\cos^2t) \sin 2t\right]_{0}^{\pi}-\int_0^{\pi} \dfrac{-\sin 2t}{1+\cos^2 t}\cdot\sin 2tdt \\
&=\int_0^{\pi} \dfrac{\sin^2 2t}{1+\cos^2 t}dt>0
\end{split}
$$

因此该常数为正。

**总结**：
固定区间长度的变限积分如果符合周期性，则先尝试确定为一个常数，再分析这个常数的性质即可。

## 660-T203：反常积分的敛散性判断

判断反常积分$I=\displaystyle\int_1^{+\infty} \dfrac{dx}{x(x^2-1)}$的敛散性。

**思路**：
第一种思路是通过具体的积分计算判断：
$$
I=\int_{1}^{+\infty} \dfrac{dx}{x^3(1-\dfrac{1}{x^2})}=-\dfrac{1}{2}\int_{1}^{+\infty} \dfrac{d(\dfrac{1}{x^2})}{1-\dfrac{1}{x^2}}=\dfrac{1}{2}\left[\ln\left(1-\dfrac{1}{x^2}\right)\right]_{1}^{+\infty}=+\infty
$$
通过计算得知该积分是发散的。

第二种思路是通过比较审敛法或适当放大缩小法：
$$
I_1=\int_1^2 \dfrac{dx}{x(x^2-1)},I_2=\int_2^{+\infty} \dfrac{dx}{x(x^2-1)}
$$
在$[1,2]$内，有$\dfrac{1}{x(x^2-1)}>\dfrac{1}{6(x-1)}$，因此：
$$
I_1>\int_1^2\dfrac{dx}{6(x-1)}=+\infty
$$
因此积分发散。

**总结**：
比较审敛法不是万能的，甚至有时可能出错，具体问题需要根据积分结构的不同具体分析。

## 660-T204：无穷区间反常积分的敛散性讨论

判断下列三个命题的真伪：
- 设$f(x)$在$(-\infty,+\infty)$内连续是奇函数，则$\displaystyle\int_{-\infty}^{+\infty} f(x)dx=0$。
- 设$f(x)$在$(-\infty,+\infty)$内连续，又$\displaystyle\lim_{R\rightarrow +\infty} \int_{-R}^{R} f(x)dx$存在，则$\displaystyle\int_{-\infty}^{+\infty} f(x)dx$收敛。
- 若$\displaystyle\int_{-\infty}^0 f(x)dx$与$\displaystyle\int_{0}^{+\infty} f(x)dx$均发散，则不能确定$\displaystyle\int_{-\infty}^{+\infty} f(x)dx$是否收敛。

**思路**：
三个命题都是错的。

第一个命题，无穷大是一个不能确定的度量，它**只表示大于任何有穷值**，而不能和其他未明确阶数的无穷大作比较。因此命题也是错的，有一个很显然的反例：
$$
\int_{-\infty}^{+\infty} \sin xdx
$$
这个积分是发散的，它的取值不能确定。

后两个命题与第一个命题同理。第二个命题只明确了在某种无穷大度量下，反常积分收敛，而没有明确其他度量下同样的结论成立。第三个命题中，积分一定发散。

**总结**：
对于无穷区间，常见的一些基于区间度量的定积分技巧（如区间再现公式、奇偶函数性质、周期函数性质等）失效。除非题干特殊说明，否则未明确阶数的无穷大之间不能做比较。

## 张宇18-P78：变限积分函数的奇偶性

设$f(x)$连续，$a$是常数，则下述命题正确的是：
- 若$f(t)$为奇函数，则$\displaystyle\int_a^x dy\displaystyle\int_0^y f(t)dt$是$x$的奇函数。
- 若$f(t)$为偶函数，则$\displaystyle\int_0^x dy\displaystyle\int_a^y f(t)dt$是$x$的奇函数。
- 若$f(t)$为奇函数，则$\displaystyle\int_0^x dy\displaystyle\int_y^x f(t)dt$是$x$的奇函数。
- 若$f(t)$为偶函数，则$\displaystyle\int_0^x dx\displaystyle\int_0^x f(t)dt$是$x$的奇函数。

**思路**：
设$F(x)=\int_0^x f(t)dt$，若$f(x)$是奇函数，则$F(x)$是偶函数；若$f(x)$是偶函数，则$F(x)$是奇函数。

第一个命题，$F(t)$为偶函数，因此
$$
G(x)=\int_a^x dy\int_0^y f(t)dt=\int_a^x F(y)dy
$$
不是奇函数，因为$G(0)=0$不恒成立。

第二个命题，$F(t)$为奇函数，因此
$$
G(x)=\int_0^x [F(y)-F(a)]dy=\int_0^xF(y)dy-xF(a)
$$
不是奇函数，因为$G(x)+G(-x)=2\displaystyle\int_0^x F(y)dy$不恒为零。

第三个命题，$F(t)$为偶函数，因此
$$
G(x)=\int_0^x dy\int_y^x f(t)dt=xF(x)-\int_0^xF(y)dy
$$
是奇函数。因为对任意的$x$，都有$G(x)+G(-x)=0$成立。

第四个命题，$F(t)$为奇函数，因此
$$
G(x)=\int_0^x F(x)dx
$$
不是奇函数（事实上是偶函数）。

**总结**：
对任何奇函数，定义域内的任意原函数为偶函数；对任何偶函数，定义域内的**某个**原函数为奇函数。

## 张宇18-P82：定义法计算定积分

设
$$
f(x)=\left\{\begin{matrix}
\displaystyle\lim_{n\rightarrow \infty} \dfrac{1}{n}\left(1+\cos\dfrac{x}{n}+\cos\dfrac{2x}{n}+\cdots+\cos\dfrac{n-1}{n}x\right), & x>0,\\
a, & x=0, \\
f(-x), & x<0
\end{matrix}\right.
$$
连续，求$a$的值。

**思路**：
根据定积分的定义计算$f(x)$定义中$x>0$的部分：
$$
\begin{split}
f(x)&=\dfrac{1}{x}\lim_{n\rightarrow \infty} \dfrac{x}{n}\left(1+\cos\dfrac{x}{n}+\cos\dfrac{2x}{n}+\cdots+\cos\dfrac{n-1}{n}x\right) \\
&=\dfrac{1}{x}\int_0^x\cos tdt=\dfrac{\sin x}{x}
\end{split}
$$
因此$a=\lim_{x\rightarrow 0}f(x)=1$。

**总结**：
定义法求定积分可能会忽视一个要点：和式的系数必须是**微元区间长度的倒数**，对于本题而言，被积区间长度是$x$，区间划分个数是$n$，则微元区间长度是$\dfrac{x}{n}$。因此，需要像思路里叙述的那样，用$x$凑一下系数。

## 张宇18-P91：换元法求不定积分

求$I=\displaystyle\int \dfrac{dx}{(2x^2+1)\sqrt{x^2+1}}$。

**思路**：
设$x=\tan t$，则$t=\arctan x$，$dx=\dfrac{dt}{\cos^2 t}$，因此：
$$
\begin{split}
I&=\int \dfrac{1}{\cos^2 t(\sec^ 2 t +\tan^2 t)\sec t}dt \\
&=\int \dfrac{\cos t}{2\sin^2 t+\cos^2 t}dt=\int \dfrac{d(\sin t)}{1+\sin^2 t}=\arctan(\sin t)+C
\end{split}
$$
代回，得：
$$
I=\arctan \dfrac{x}{\sqrt{x^2+1}}+C
$$

**总结**：
如果被积函数内含有形似$\sqrt{x^2+1}$的因式，优先考虑$x=\tan t$换元。

## 张宇18-P91：换元法求不定积分

求$I=\displaystyle\int \dfrac{1}{\sqrt{e^x+1}+\sqrt{e^x-1}}dx$。

**思路**：
如果是一个根号，果断换元，但两个根号相加还是在分母上，则需要考虑一下分母有理化：
$$
I=\int \dfrac{\sqrt{e^x+1}-\sqrt{e^x-1}}{2}dx
$$
可以分拆成两个积分分别计算，也能计算出正确的结果。

答案给出的是另一种解法：更简便的方法可以考虑设$t=e^x$，则$x=\ln t$，$dx=\dfrac{dt}{t}$。同时：
$$
I=\dfrac{1}{2}\int \dfrac{\sqrt{t+1}-\sqrt{t-1}}{t}dt
$$
对$\dfrac{1}{2}\displaystyle\int \dfrac{\sqrt{t+1}}{t}dt$，设$u=\sqrt{t+1}$，则：
$$
\begin{split}
\dfrac{1}{2}\int \dfrac{\sqrt{t+1}}{t}dt&=\dfrac{1}{2}\int \dfrac{2u^2}{u^2-1}du=u+\dfrac{1}{2}\ln\left|\dfrac{u-1}{u+1}\right|+C_1 \\
&=\sqrt{e^x+1}+\dfrac{1}{2}\ln\dfrac{\sqrt{e^x+1}-1}{\sqrt{e^x+1}+1}+C_1
\end{split}
$$
对$\dfrac{1}{2}\displaystyle\int \dfrac{\sqrt{t-1}}{t}dt$同理：
$$
\dfrac{1}{2}\int \dfrac{\sqrt{t-1}}{t}dt=\sqrt{e^x-1}-\arctan \sqrt{e^x-1}+C_2
$$
因此：
$$
I=\sqrt{e^x+1}-\sqrt{e^x-1}+\arctan\sqrt{e^x-1}+\dfrac{1}{2}\ln\dfrac{\sqrt{e^x+1}-1}{\sqrt{e^x+1}+1}+C
$$

**总结**：
对于被积函数中只有一个根号的情形，一般宜使用换元法。但如果被积函数中有两个根号相加或者相减，则需要认真考虑恒等变形或者其他方法。

## 张宇18-P92：分部积分法创造积分抵消情形

求$I=\displaystyle\int e^x\left(\dfrac{1-x}{1+x^2}\right)^2dx$。

**思路**：
不要立即运用分部积分法。在运用之前，先进行一次恒等变形，将积分分拆：
$$
I=I_1+I_2=\int \dfrac{e^x}{1+x^2}dx+\int e^x\dfrac{-2x}{(1+x^2)^2}dx
$$
随后利用分部积分法计算$I_2$：
$$
I_2=\dfrac{e^x}{1+x^2}-\int \dfrac{e^x}{1+x^2}dx
$$
代回，发现抵消了一个积分项，因此：
$$
I=\dfrac{e^x}{1+x^2}+C
$$

**总结**：
分部积分法有可能创造出**积分再现**或**积分抵消**的情形，是积分中常见的情形。

## 张宇18-P92：分部积分法和递推法计算定积分

设$n\in \mathbf{N}_{+}$，求$I_n=\displaystyle\int_0^1 x^2\ln^n xdx$。

**思路**：
运用分部积分法，可以推导出$I_n$和$I_{n-1}$之间的递推关系式：
$$
I_n=\left[\dfrac{x^3}{3}\ln^n x\right]_0^1-\int_0^1 \dfrac{nx^2}{3}\ln^{n-1} xdx=-\dfrac{n}{3}I_{n-1}
$$
而$I_0=\dfrac{1}{3}$，所以：
$$
I_n=\dfrac{(-1)^n}{3^{n+1}}n!
$$

**总结**：
部分求定积分的题目可能难于甚至无法求出原函数，但在不同参数下的定积分之间可能存在一些规律。根据这种规律，即可利用递推方法计算定积分。

## 张宇18-P98：区间再现法计算定积分

求$I=\displaystyle\int_0^1 \dfrac{\ln(1+x)}{1+x^2}dx$。

**思路**：
考虑到分母是$\arctan x$的导数，令$x=\tan t$，得：
$$
I=\int_0^{\pi/4} \ln(1+\tan t)dt
$$
直接计算该定积分仍是十分困难的。除非进行区间再现方式换元，令$u=\dfrac{\pi}{4}-t$，得：
$$
\begin{split}
I&=\int_0^{\pi/4}\ln\left[1+\tan\left(\dfrac{\pi}{4}-u\right)\right]du \\
&=\int_0^{\pi/4} \ln\left(1+\dfrac{1-\tan u}{1+\tan u}\right)du=\int_0^{\pi/4} \ln\dfrac{2}{1+\tan u}du=\dfrac{\pi}{4}\ln 2-I
\end{split}
$$
解得：
$$
I=\dfrac{\pi}{8}\ln 2
$$

**总结**：
题中涉及的积分
$$
I=\int \ln(1+\tan x)dx
$$
比较特殊，一般只能通过区间再现换元计算。

## 张宇18-P99：解定积分

设$f(x)$连续，$\displaystyle\int_0^{\pi/4} f(2x)dx-f(x)=\cos^4 x$，求$I=\displaystyle\int_0^{\pi/2} f(x)dx$。

**思路**：
等式变形，得到：
$$
f(x)=\dfrac{I}{2}-\cos^4 x
$$
对等式积分，得到关于$I$的方程：
$$
I=\int_0^{\pi/2} \left(\dfrac{I}{2}-\cos^4 x\right)dx=\dfrac{\pi}{4}I-\dfrac{3\pi}{16}
$$
解得：
$$
I=\dfrac{3\pi}{4(\pi-4)}
$$

**总结**：
二刷做对了，以后再看一眼。

## 张宇18-P100：定积分分部积分法的升降阶问题

设
$$
f(x)=\lim_{t\rightarrow \infty} t^2\sin \dfrac{x}{t}\cdot\left[g\left(2x+\dfrac{1}{t}\right)-g(2x)\right]
$$
且$g(x)$的一个原函数是$\ln(x+1)$，求$\displaystyle\int_0^1 f(x)dx$。

**思路**：
首先考虑表示$f(x)$。右侧大方括号内可表示为$\dfrac{g'(2x)}{t}$，再用$\dfrac{\sin u}{u}$的极限化简：
$$
\begin{split}
f(x)&=x\cdot \lim_{t\rightarrow \infty} \cdot\dfrac{\sin\dfrac{x}{t}}{\dfrac{x}{t}}\cdot\dfrac{g\left(2x+\dfrac{1}{t}\right)-g(2x)}{\dfrac{1}{t}} \\
&=x\cdot 1\cdot g'(2x)=xg'(2x)
\end{split}
$$
因此：
$$
\begin{split}
\int_0^1 xg'(2x)dx&=\dfrac{1}{2}\int_0^2 \dfrac{t}{2}g'(t)dt=\dfrac{1}{4}\int_0^2 td[g(t)]\\
&=\dfrac{1}{4}\left[\left.tg(t)\right|_0^2-\int_0^2g(t)dt\right]\\
&=\dfrac{1}{4}\left[x\cdot\dfrac{1}{1+x}-\ln(x+1)\right]_0^2\\
&=\dfrac{1}{6}-\dfrac{1}{4}\ln 3
\end{split}
$$

**总结**：
本题已知的是$\displaystyle\int g(x)dx$，要求将$g'(x)$通过不断表示，最终表示为和$\displaystyle\int g(x)dx$相关的一个结果。这个过程是降阶过程。相反地，已知$g'(x)$并将其用于表示$\displaystyle\int g(x)dx$的过程称为升阶过程。

两种过程的要点都是运用分部积分法，进行灵活的升降阶操作。

## 张宇18-P102：换元求导型积分问题

设$f(x)$在$[0,+\infty)$上可导，$f(0)=0$，其反函数为$g(x)$。若
$$
\int_x^{x+f(x)} g(t-x)dt=x^2\ln(1+x)
$$
求$f(x)$。

**思路**：
先通过换元（$u=t-x$）消去变限积分的交叉项（$t-x$）：
$$
\int_x^{x+f(x)} g(t-x)dt=\int_0^{f(x)}g(u)du
$$
等式两边对$x$求导，并利用反函数的性质（$f^{-1}[f(x)]=x$）进行化简：
$$
f'(x)g[f(x)]=xf'(x)=2x\ln(1+x)+\dfrac{x^2}{1+x}
$$
当$x\neq 0$时，有$f'(x)=2\ln(1+x)+\dfrac{x}{1+x}$，对两边积分：
$$
\begin{split}
f(x)&=\int \left[2\ln(1+x)+\dfrac{x}{1+x}\right]dx\\
&=(2x+1)\ln(1+x)-x+C
\end{split}
$$
代入$f(0)=0$，解得$C=0$，因此：
$$
f(x)=(2x+1)\ln(1+x)-x,x\ge 0
$$

**总结**：
本题首先需要处理变限积分的交叉项问题，其次要运用反函数性质简化问题，随后要计算不定积分，最后要根据$f(0)$的值确定目标函数。

## 张宇18-P103：换元求导型积分问题

设$f(x)$在$\mathbf{R}$内非负连续，且
$$
\int_0^x tf(x^2)f(x^2-t^2)dt=\sin^2(x^2)
$$
求$f(x)$在$[0,\pi]$上的平均值。

**思路**：
令$u=x^2-t^2$，则$du=-2tdt$，即：
$$
\sin^2(x^2)=\dfrac{1}{2}f(x^2)\int_0^{x^2} f(u)du
$$
令$x^2=v$，$F(v)=\displaystyle\int_0^v f(r)dr$，则：
$$
2\sin^2 v=f(v)F(v)=F(v)F'(v)
$$
对$v$在$[0,\pi]$积分，有：
$$
\int_0^{\pi} F(v)F'(v)dv=\left.\dfrac{1}{2}F^2(v)\right|_{0}^{\pi}=2\int_0^{\pi} \sin^2 vdv=\pi
$$
故$F(\pi)=\sqrt{2\pi}$，因此$f(x)$在$[0,\pi]$上的平均值为：
$$
\dfrac{1}{\pi}\int_0^{\pi} f(x)dx=\sqrt{\dfrac{2}{\pi}}
$$

**总结**：
消除交叉项是老生常谈。问题在于如何巧妙处理$FF'$，反应出其原函数正是$\dfrac{F^2}{2}$。

## 张宇18-P104：拆分求导型积分问题

设$|x|\le 1$，求积分$I(x)=\displaystyle\int_{-1}^1 |t-x|e^{2t}dt$的最大值。

**思路**：
由于$x$落在$1$和$-1$之间，所以考虑拆分绝对值，形成两个不带绝对值号的积分：
$$
I(x)=\int_{-1}^x (x-t)e^{2t}dt+\int_{x}^1 (t-x)e^{2t}dt
$$
这是两个带交叉项的变限积分，需要进一步拆解：
$$
I(x)=-\int_{-1}^x te^{2t}dt+\int_x^1 te^{2t}dt-x\left[\int_x^1e^{2t}dt-\int_{-1}^x e^{2t}dt\right]
$$
求导：
$$
I'(x)=-xe^{2x}-xe^{2x}-\left[\int_x^1e^{2t}dt-\int_{-1}^x e^{2t}dt\right]-x\left[-2e^{2x}\right]=e^{2x}-\dfrac{e^2+e^{-2}}{2}
$$
可见$x=\dfrac{1}{2}\ln\dfrac{e^2+e^{-2}}{2}$是最小值点，因此最大值点只能在$x=\pm 1$处取得：
$$
I_{\max}=\max\{I(-1),I(1)\}=\max\{\dfrac{3}{4}e^2+\dfrac{1}{4}e^{-2},\dfrac{1}{4}e^2-\dfrac{5}{4}e^{-2}\}=\dfrac{3}{4}e^2+\dfrac{1}{4}e^{-2}
$$

**总结**：
在变限积分里遇到绝对值，一般考虑以绝对值分界点为界拆分成两个或多个积分，分别计算。

## 张宇18-P105：换序型积分问题

求极限$A=\displaystyle\lim_{t\rightarrow 0^+} \dfrac{1}{t^5}\displaystyle\int_0^t dy\int_y^t \dfrac{\sin(xy)^2}{x}dx$。

**思路**：
题目给了一个二重积分，但是难于处理。如果被积函数先对$y$积分，则积分的计算会相对容易，这里涉及到换序：
$$
\begin{split}
A&=\lim_{t\rightarrow 0^+} \dfrac{1}{t^5}\int_0^t \dfrac{1}{x}dx\int_0^x \sin(xy)^2dy \\
\end{split}
$$
视二重积分为函数，洛必达法则→消除变限积分交叉项→洛必达法则→计算极限：
$$
\begin{split}
A&=\lim_{t\rightarrow 0^+} \dfrac{\dfrac{1}{t}\displaystyle\int_0^t \sin(ty)^2dy}{5t^4}=\lim_{t\rightarrow 0^+}\dfrac{\dfrac{1}{t}\displaystyle\int_0^{t^2} \sin u^2du}{5t^5} \\
&=\lim_{t\rightarrow 0^+}\dfrac{2t\cdot\sin(t^4)}{30t^5}=\dfrac{1}{15}
\end{split}
$$

**总结**：
本题其实更像是二重积分部分的题，但是被排到了这里。核心思想是先换序化简二重积分，再反复运用洛必达法则。

## 张宇18-P105：反常积分的计算

求$I=\displaystyle\int_0^1 \dfrac{x^2\arcsin x}{\sqrt{1-x^2}}dx$。

**思路**：
在做这题之前，为什么不考虑分部积分法？因为太难处理。

考虑换元（$x=\sin t$，$dx=\cos tdt$，$t=\arcsin x$），因此：
$$
I=\int_0^{\pi/2} \dfrac{t\sin^2 t}{\cos t}\cdot\cos tdt=\int_0^{\pi/2} t\sin^2 tdt
$$
这个积分可以用分部积分法计算：
$$
I=\int_0^{\pi/2} \left(\dfrac{t}{2}-\dfrac{t\cos 2t}{2}\right)dt=\dfrac{\pi^2}{16}+\dfrac{1}{4}
$$

**总结**：
如何选择积分计算的第一步很关键，选择一般不会逃出换元、分部积分或者凑微分法的范围。

## 张宇18-P111：曲线绕定直线旋转体的体积计算

求曲线$y=e^x$（$0\le x\le 1$）绕直线$y=x$旋转一周所得的旋转体的体积。

**思路**：
![[Pasted image 20230714083251.png]]

旋转体是曲边梯形$ABCD$绕$y=x$旋转一周形成的。

根据[[Z03-一元函数积分学#^a28155|平面曲线绕定直线旋转体的体积]]公式，得知：
$$
\begin{split}
V&=\dfrac{\pi}{2\sqrt{2}}\left[\int_0^1 (x-e^x)^2(e^x+1)dx \right] \\
&=\dfrac{\pi}{2\sqrt{2}}\left[\int_0^1 (e^x-x)^2d(e^x-x)+\int_0^1 2(e^x-x)^2 dx \right]\\
&=\dfrac{\pi}{2\sqrt{2}}\left[\dfrac{(e-1)^3-1}{3}+2\int_0^1 (e^{2x}-2xe^x+x^2) dx \right]\\
&=\dfrac{\pi}{2\sqrt{2}}\left[\dfrac{(e-1)^3-1}{3}+e^2-\dfrac{13}{3}\right]\\
&=\dfrac{\pi}{2\sqrt{2}}\left[\dfrac{1}{3}(e-1)^3+e^2-\dfrac{14}{3}\right]
\end{split}
$$

**总结**：
本质上是个套公式题。

## 张宇18-P111：由隐函数确定的曲线旋转体的体积

函数$f(x,y)$满足$\dfrac{\partial f(x,y)}{\partial y}=2(y+1)$，且$f(y,y)=(y+1)^2-(2-y)\ln y$，求曲线$f(x,y)=0$所围图形绕直线$y=-1$旋转一周所得旋转体的体积。

**思路**：
由$f_y'=2(y+1)$得：
$$
f(x,y)=(y+1)^2+g(x)
$$
与$f(y,y)$比较，得到：
$$
f(x,y)=(y+1)^2-(2-x)\ln x
$$
因此曲线方程：
$$
(y+1)^2=(2-x)\ln x,1\le x\le 2
$$
进而可以计算出旋转体的体积：
$$
V=\pi\int_1^2 (1+y)^2dx=\pi\int_1^2 (2-x)\ln x dx=(2\ln 2-\dfrac{5}{4})\pi
$$

**总结**：
旋转体公式恰恰可以使用隐函数转化为一元函数的积分问题。

## 张宇18-P112：由微分方程确定的曲线旋转体的体积

设$y=f(x)$满足微分方程$y'+y=\dfrac{e^{-x}\cos x}{2\sqrt{\sin x}}$，且$f(\pi)=0$，求曲线$y=f(x)$（$x\ge 0$）绕$x$轴旋转一周所得旋转体的体积。

**思路**：
解微分方程得：
$$
y=f(x)=e^{-x}\sqrt{\sin x},x\ge 0
$$
旋转体的体积（注意，定义域包括不止一个区间）：
$$
\begin{split}
V&=\sum_{n=0}^{+\infty} \pi\int_{2n\pi}^{(2n+1)\pi} e^{-2x}\sin xdx \\
&=\pi\sum_{n=0}^{+\infty} \left[\dfrac{1}{5}e^{-2x}\left(-2\sin x-\cos x\right)\right]_{2n\pi}^{(2n+1)\pi} \\
&=\dfrac{\pi}{5}\sum_{n=0}^{+\infty} (e^{-4n\pi}\cdot e^{-2\pi}+e^{-4n\pi})\\
&=\dfrac{\pi(1+e^{-2\pi})}{5}\sum_{n=0}^{+\infty} e^{-4n\pi}=\dfrac{\pi}{5(1-e^{-2\pi})}
\end{split}
$$

**总结**：
旋转体可能是由若干段分离的几何体组成的，不是铁板一块。这种情况下需要分开计算。

## 张宇18-P113：由极坐标方程确定的曲线旋转体的体积

求心形线$r=2(1+\cos \theta)$和$\theta=0$，$\theta=\dfrac{\pi}{2}$围成的图形绕极轴旋转一周所成旋转体的体积。

**思路**：
![[Pasted image 20230714105639.png]]

为了方便起见，将$x,y$用$\theta$进行表示：
$$
\begin{split}
x=2(1+\cos\theta)\cos\theta\\
y=2(1+\cos\theta)\sin\theta
\end{split}
$$
运用旋转体体积公式进行积分：
$$
\begin{split}
V&=\pi\int_0^4 y^2dx=8\pi\int_0^{\pi/2} (1+\cos\theta)^2\sin^3\theta(1+2\cos\theta)d\theta \\
&=20\pi
\end{split}
$$

**总结**：
极坐标方程中$r$一般不用于表示$x,y$，因为表示结果可能十分丑陋，难于积分，一般用$\theta$表示$x,y$。

## 张宇18-P114：