
## 定义

定义：
- 是二叉排序树
- 每个结点带有颜色属性，非红即黑
- 红结点的所有子结点全为黑结点
	- 可以引申为，不存在两个相邻的红结点
- 根结点和叶结点（外部结点、NULL结点）均为黑结点
- **黑高一致**：从根结点到任意叶结点经过的黑结点个数一致

结论：
- 从根节点到叶结点的最长路径长度不超过最短路径长度的2倍
- 有$n$个内部结点的红黑树的高度不超过$2\log_2(n+1)$

与AVL的权衡利弊：
- 平衡性：红黑树主张适度平衡，AVL主张高度平衡
- 适用情形：
	- 增删密集情形：红黑树更佳，可以降低形态调整的频率
	- 改查密集情形：AVL更佳，其ASL更低

## 插入操作

- 可以假定插入结点为红，这样不会违反黑高一致性
- 讨论：
	- 如果是插入的是根节点，则直接改黑色
	- 如果父结点是黑色，则插入完成
	- 如果父结点是红色，则需要修复：父结点调整为黑色，并继续向上调整，如果根最终调整为红色，则需要改成黑色

修复方法：
- 前提：插入结点是红色，父结点是红色
- 要点：维持黑色结点数量
- 推断：祖父结点必是黑色，否则插入之前便违反性质
- 情况一：叔叔结点存在且为红色
	- 祖父修正为红色，父亲和叔叔结点修复为黑色
- 情况二：叔叔结点为黑色或不存在
	- 执行一次左旋或右旋，父亲结点调整为根，颜色调整为黑
	- 子情况一：

情况一：
![[Pasted image 20231227135132.png]]

情况二（父亲为祖父的左儿子，此时右旋）：
![[Pasted image 20231227135159.png]]

情况二（父亲为祖父的右儿子，此时左旋）：
